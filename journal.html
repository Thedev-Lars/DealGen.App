<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,viewport-fit=cover" />
  <title>TraderDuo â€” Trading Journal</title>
  <link rel="stylesheet" href="styles.css" />
  <script defer src="app.js"></script>
</head>
<body>
<input id="nav" hidden type="checkbox">

<div class="top">
  <label class="hamb" for="nav">â˜°</label>
  <div class="brand">Trader<span style="color:var(--prime)">Duo</span></div>
  <div class="search"><input placeholder="Search accounts, positions, orders..."></div>
  <button id="themeBtn" class="theme-toggle" title="Toggle light/dark">ðŸŒ— Theme</button>
  <div class="status-indicator"><span>Live</span></div>
</div>

<div class="overlay"></div>

<div class="layout">
  <aside>
    <div class="nav-section">Dashboard</div>
    <a class="navbtn" href="overview.html"><span>Overview</span></a>
    <a class="navbtn" href="copy.html"><span>Copy Trading</span></a>
    <a class="navbtn active" href="journal.html"><span>Trading Journal</span></a>

    <div class="nav-section">Management</div>
    <a class="navbtn" href="settings.html"><span>Settings</span></a>

    <div style="margin-top:auto;display:grid;gap:10px;">
      <button class="btn danger" id="emergencyStop">ðŸš¨ Emergency Stop</button>
      <button class="btn" id="closeAllPositions">Close All Positions</button>
      <button class="btn" id="cancelAllOrders">Cancel All Orders</button>
    </div>
  </aside>

  <main class="main">
    <!-- Trading Journal -->
    <section id="journal" data-page="journal" class="show" style="display:block;visibility:visible;">
      <!-- Performance Overview -->
      <div class="grid g-4" style="margin-bottom:20px;">
        <div class="performance-metric">
          <div class="metric-value positive">$2,847</div>
          <div class="metric-label">Total P&L (30d)</div>
        </div>
        <div class="performance-metric">
          <div class="metric-value">73.3%</div>
          <div class="metric-label">Win Rate</div>
        </div>
        <div class="performance-metric">
          <div class="metric-value">2.41</div>
          <div class="metric-label">Profit Factor</div>
        </div>
        <div class="performance-metric">
          <div class="metric-value">1.68</div>
          <div class="metric-label">Sharpe Ratio</div>
        </div>
      </div>

      <!-- P&L Charts -->
      <div class="grid g-3" style="margin-bottom:20px;">
        <div class="card">
          <h3>Weekly P&L (Last 8)</h3>
          <div id="weeklyPnL" class="kpi" style="font-size:20px;color:var(--success);">$1,414</div>
          <div class="chart-container">
            <svg id="weeklyChart" class="svg" viewBox="0 0 100 40">
              <line x1="8" y1="20" x2="92" y2="20" stroke="rgba(255,255,255,0.1)" stroke-width="0.5"/>
              <rect x="8" y="10" width="10" height="10" rx="2" fill="#10b981" opacity="0.8"/>
              <rect x="20" y="5" width="10" height="15" rx="2" fill="#10b981" opacity="0.8"/>
              <rect x="32" y="22" width="10" height="3" rx="2" fill="#ef4444" opacity="0.6"/>
              <rect x="44" y="7" width="10" height="13" rx="2" fill="#10b981" opacity="0.8"/>
              <rect x="56" y="12" width="10" height="8" rx="2" fill="#10b981" opacity="0.8"/>
              <rect x="68" y="8" width="10" height="12" rx="2" fill="#10b981" opacity="0.8"/>
              <rect x="80" y="4" width="10" height="16" rx="2" fill="#10b981" opacity="0.8"/>
            </svg>
          </div>
        </div>

        <div class="card">
          <h3>Monthly P&L (YTD)</h3>
          <div id="monthlyPnL" class="kpi" style="font-size:20px;color:var(--success);">$18,456</div>
          <div class="chart-container">
            <svg id="monthlyChart" class="svg" viewBox="0 0 100 40">
              <line x1="8" y1="20" x2="92" y2="20" stroke="rgba(255,255,255,0.1)" stroke-width="0.5"/>
              <rect x="8" y="15" width="7" height="5" rx="2" fill="#10b981" opacity="0.8"/>
              <rect x="17" y="12" width="7" height="8" rx="2" fill="#10b981" opacity="0.8"/>
              <rect x="26" y="8" width="7" height="12" rx="2" fill="#10b981" opacity="0.8"/>
              <rect x="35" y="10" width="7" height="10" rx="2" fill="#10b981" opacity="0.8"/>
              <rect x="44" y="6" width="7" height="14" rx="2" fill="#10b981" opacity="0.8"/>
              <rect x="53" y="4" width="7" height="16" rx="2" fill="#10b981" opacity="0.8"/>
              <rect x="62" y="7" width="7" height="13" rx="2" fill="#10b981" opacity="0.8"/>
              <rect x="71" y="5" width="7" height="15" rx="2" fill="#10b981" opacity="0.8"/>
              <rect x="80" y="3" width="7" height="17" rx="2" fill="#10b981" opacity="0.8"/>
            </svg>
          </div>
        </div>

        <div class="card">
          <h3>Yearly P&L</h3>
          <div id="yearlyPnL" class="kpi" style="font-size:20px;color:var(--success);">$47,892</div>
          <div class="chart-container">
            <svg id="yearlyChart" class="svg" viewBox="0 0 100 40">
              <line x1="8" y1="20" x2="92" y2="20" stroke="rgba(255,255,255,0.1)" stroke-width="0.5"/>
              <rect x="20" y="12" width="15" height="8" rx="2" fill="#10b981" opacity="0.8"/>
              <rect x="40" y="6" width="15" height="14" rx="2" fill="#10b981" opacity="0.8"/>
              <rect x="60" y="4" width="15" height="16" rx="2" fill="#10b981" opacity="0.8"/>
            </svg>
          </div>
        </div>
      </div>

      <!-- Performance Calendar -->
      <div class="card" style="margin-bottom:20px;">
        <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:16px;">
          <h3 style="margin:0;">Performance Calendar</h3>
          <div style="display:flex;gap:8px;align-items:center;">
            <span id="calendarMonth" class="muted">September 2025</span>
            <button class="btn xs" onclick="changeCalendarMonth(-1)">â—€</button>
            <button class="btn xs" onclick="changeCalendarMonth(1)">â–¶</button>
          </div>
        </div>
        <div class="calendar-grid" id="performanceCalendar"></div>
      </div>

      <!-- Strategy Performance -->
      <div class="card" style="margin-bottom:20px;">
        <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:16px;">
          <h3 style="margin:0;">Strategy Performance</h3>
          <button class="btn sm primary" id="addNewStrategy">Add New Strategy</button>
        </div>
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>Strategy</th><th>Trades</th><th>Win Rate</th><th>Profit Factor</th><th>Total P&L</th><th>Max DD</th><th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>ES Scalping</strong></td><td>87</td>
                <td><span style="color:var(--success);">76.4%</span></td><td>2.89</td>
                <td><span style="color:var(--success);">$1,847</span></td><td><span style="color:var(--danger);">-$156</span></td>
                <td><button class="btn xs" onclick="viewStrategyDetails('ES Scalping')">View Details</button></td>
              </tr>
              <tr>
                <td><strong>NQ Momentum</strong></td><td>34</td>
                <td><span style="color:var(--success);">71.2%</span></td><td>1.94</td>
                <td><span style="color:var(--success);">$743</span></td><td><span style="color:var(--danger);">-$234</span></td>
                <td><button class="btn xs" onclick="viewStrategyDetails('NQ Momentum')">View Details</button></td>
              </tr>
              <tr>
                <td><strong>Oil Swing</strong></td><td>12</td>
                <td><span style="color:var(--success);">66.7%</span></td><td>1.42</td>
                <td><span style="color:var(--success);">$257</span></td><td><span style="color:var(--danger);">-$89</span></td>
                <td><button class="btn xs" onclick="viewStrategyDetails('Oil Swing')">View Details</button></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Trade Journal -->
      <div class="card">
        <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:16px;">
          <h3 style="margin:0;">Trade Journal</h3>
          <div style="display:flex;gap:8px;">
            <button class="btn sm primary" id="addTradeNote">Add Trade Note</button>
            <button class="btn sm" id="filterTrades">Filter Trades</button>
          </div>
        </div>

        <div id="tradeEntries">
          <div class="trade-entry">
            <div class="trade-header">
              <div style="display:flex;align-items:center;gap:12px;">
                <span class="badge success">ESZ5</span>
                <span style="font-weight:800;">Long +2 @ $5,847.25</span>
                <span class="badge success">+$89.50</span>
              </div>
              <span class="muted" style="font-size:12px;">Today, 9:18 AM</span>
            </div>
            <div class="trade-meta">
              <span>Strategy: ES Scalping</span><span>Duration: 1h 23m</span><span>R/R: 1:2.4</span>
            </div>
            <div style="margin-top:8px;padding:8px;background:var(--glass);border-radius:6px;font-size:13px;">
              <strong>Entry Reason:</strong> Breakout above key resistance at 5,845 with strong volume. RSI oversold bounce setup.
            </div>
          </div>

          <div class="trade-entry">
            <div class="trade-header">
              <div style="display:flex;align-items:center;gap:12px;">
                <span class="badge">NQZ5</span>
                <span style="font-weight:800;">Long +1 @ $22,681.50</span>
                <span class="badge danger">-$45.25</span>
              </div>
              <span class="muted" style="font-size:12px;">Yesterday, 2:15 PM</span>
            </div>
            <div class="trade-meta">
              <span>Strategy: NQ Momentum</span><span>Duration: 45m</span><span>R/R: 1:1.8</span>
            </div>
            <div style="margin-top:8px;padding:8px;background:var(--glass);border-radius:6px;font-size:13px;">
              <strong>Exit Reason:</strong> Stop loss hit. Market showed signs of weakness after initial momentum failed.
            </div>
          </div>
        </div>

        <div style="text-align:center;margin-top:16px;">
          <button class="btn" id="loadMoreTrades">Load More Trades</button>
        </div>
      </div>
    </section>
  </main>
</div>

<!-- Add Trade Note Modal -->
<div class="modal-backdrop" id="addTradeModalBackdrop"></div>
<div class="modal" id="addTradeModal">
  <div class="modal-card">
    <div class="modal-head">
      <h3>Add Trade Note</h3>
      <button class="btn" onclick="closeModal('#addTradeModal')">Close</button>
    </div>
    <div class="modal-body">
      <div class="form-group">
        <label class="form-label">Symbol</label>
        <input class="form-input" id="tradeSymbol" placeholder="ESZ5">
      </div>
      <div class="form-group">
        <label class="form-label">Side & Quantity</label>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;">
          <select class="form-input" id="tradeSide"><option>Long</option><option>Short</option></select>
          <input class="form-input" id="tradeQty" placeholder="Quantity">
        </div>
      </div>
      <div class="form-group">
        <label class="form-label">Entry Price</label>
        <input class="form-input" id="tradeEntry" placeholder="5847.25">
      </div>
      <div class="form-group">
        <label class="form-label">P&L</label>
        <input class="form-input" id="tradePnL" placeholder="+89.50">
      </div>
      <div class="form-group">
        <label class="form-label">Strategy</label>
        <select class="form-input" id="tradeStrategy">
          <option>ES Scalping</option><option>NQ Momentum</option><option>Oil Swing</option><option>Manual Trade</option>
        </select>
      </div>
      <div class="form-group">
        <label class="form-label">Entry Reason</label>
        <textarea class="form-input" id="tradeReason" style="min-height:80px;" placeholder="Describe your entry reasoning..."></textarea>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn" onclick="closeModal('#addTradeModal')">Cancel</button>
      <button class="btn primary" onclick="saveTradeNote()">Save Trade Note</button>
    </div>
  </div>
</div>

<!-- Calendar Day Detail Modal -->
<div class="modal-backdrop" id="calendarDayModalBackdrop"></div>
<div class="modal" id="calendarDayModal">
  <div class="modal-card">
    <div class="modal-head">
      <h3 id="calendarDayTitle">September 15, 2025</h3>
      <button class="btn" onclick="closeModal('#calendarDayModal')">Close</button>
    </div>
    <div class="modal-body">
      <div id="calendarDayContent"></div>
    </div>
  </div>
</div>

<!-- Quick Actions -->
<div class="quick-actions">
  <button class="quick-action" title="Emergency Stop" onclick="emergencyStopAll()">ðŸš¨</button>
  <button class="quick-action" title="Add Position" onclick="addPosition()">âž•</button>
  <button class="quick-action" title="Export Data" onclick="exportData()">ðŸ“Š</button>
</div>
</body>
</html>